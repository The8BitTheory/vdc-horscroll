#RetroDevStudio.MetaData.BASIC:7169,BASIC V7.0 VDC
# THIS LOADS THE SPACE QUEST 1 ARCADA SCENE
# MEMORY OFFSETS ARE CORRECT, THE IMAGE SHOULD DISPLAY FINE
# CURSOR KEYS ALLOW TO SCROLL LEFT AND RIGHT

10 DEF FN W(ZZ)=PEEK(ZZ)+PEEK(ZZ+1)*256
20 BS=FN W(45)
30 BE=FN W(4624)
# DB:DATA BEGIN
# DE:DATA END
40 DB=BE+1:DE=DB+8000

50 PRINT "BASIC FROM "BS" TO "BE"."
60 PRINT "LEAVES "FRE(0)" BYTES FREE."
70 DD=PEEK(186)

80 PRINT "INSERT DATADISK":GETKEY I$
90 BLOAD "VDCBASIC2.0AC6",B0,U(DD):SYS DEC("AC6")

100 GRAPHIC 0

110 AP=32000

120 RGO 28,16:REM 64K VRAM
130 RGO 25,128:REM BITMAP MODE ON
# 2 SCANLINES PER CHAR, 156 SCANLINES (EACH VAL +1)
140 RGW 0,127:RGW 4,155:RGW 6,100:RGW 7,140:RGW 9,1
150 RGW 36,0

155 RGW 1,79

160 VMF 0,15,AP:REM SETUP PIXELS
170 VMF AP,0,16000: REM CLEAR ATTRIBUTE RAM
180 DISP 0:ATTR AP

190 PF$="SQSCROLL.VDC":A=0:GOSUB 370

# INCREASE VIRTUAL LINESIZE TO 160
210 RGW 27,81

220 PRINT "CURSORS LEFT/RIGHT: MEM START -/+  1"
240 PRINT "R SETS ADDR INC PER ROW TO  0"
250 PRINT "V SETS ADDR INC PER ROW TO 80"


260 X=78:Y=0
270 DO:GETKEY I$
#    CURSOR LEFT/RIGHT
280  IF ASC(I$)=157 THEN IF X>78 THEN X=X-1
290  IF ASC(I$)=29 THEN IF X<158 THEN X=X+1

320  IF I$="R" THEN RGW 27,0
330  IF I$="V" THEN RGW 27,80

340  ATTR AP+X-78:DISP X
350 LOOP

360 SLOW:BANK 15:END


370 PRINT "LOADING "PF$" ... ";
380 BLOAD (PF$),B0,P(DB),U(DD)
390 PRINT "DONE"

400 RTV DB,78,32000
410 RTV DB+32000,32080,16000
420 DISP 78
430 ATTR 32000

440 SLOW

450 RETURN

